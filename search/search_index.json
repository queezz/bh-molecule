{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"BH Molecule","text":"<p>This project provides tools to model and fit the A\u2013X band spectra of boron hydride (BH). It began life as a set of Jupyter notebooks and has since been refactored into a Python package.</p>"},{"location":"#installation","title":"Installation","text":"<p>You can install BH Molecule locally or directly from GitHub. Both methods will make the CLI commands (<code>bh-spectra</code>, <code>bh-spectra-csv</code>, <code>bh-spectra-plot</code>) available in your terminal.</p> <p>From a cloned repository:</p> <p><pre><code>pip install .\n</code></pre> Or, fordevelopment: <pre><code>pip install -e .\n</code></pre></p> <p>See the Dev Install Guide for more details.</p> <p>Directly from GitHub:</p> <pre><code>pip install git+https://github.com/queezz/bh-molecule.git\n</code></pre> <p>After installation, try:</p> <pre><code>bh-spectra --xmin 432.8 --xmax 434.2 --points 4000 --out spectrum.npz\n</code></pre>"},{"location":"#quick-start","title":"Quick start","text":"<p>Use the Python API:</p> <p>Python example:</p> <pre><code>import numpy as np\nfrom bh_molecule.dataio import load_v00_wavelengths\nfrom bh_molecule.physics import BHModel\n\nmodel = BHModel(load_v00_wavelengths())\nx = np.linspace(432.8, 434.2, 4000)\ny = model.full_fit_model(x, C=1.0, T_rot=2000, dx=0.0, w_inst=0.02)\n</code></pre>"},{"location":"cli_commands/","title":"BH-Molecule CLI Commands","text":"<p>The BH-Molecule package provides three main command-line tools for generating, exporting, and plotting model spectra of the boron hydride (BH) A\u2013X band.</p>"},{"location":"cli_commands/#installation","title":"Installation","text":"<p>To use the commands, you need to install the package. See the Installation section.</p> <ul> <li><code>bh-spectra</code></li> <li><code>bh-spectra-csv</code></li> <li><code>bh-spectra-plot</code></li> </ul>"},{"location":"cli_commands/#common-parameters","title":"Common Parameters","text":"<p>All three commands share a set of parameters controlling the generated spectrum:</p> Parameter Type Default Description <code>--xmin</code> float 432.8 Minimum wavelength in nm <code>--xmax</code> float 434.2 Maximum wavelength in nm <code>--points</code> int 4000 Number of wavelength points <code>--C</code> float 1.0 Concentration factor <code>--T_rot</code> float 2000.0 Rotational temperature in K <code>--dx</code> float 0.0 Wavelength shift in nm <code>--w_inst</code> float 0.02 Instrumental FWHM in nm <code>--base</code> float 0.0 Baseline offset <code>--I_R7</code> float 0.5 Intensity of R\u2087 branch line <code>--I_R8</code> float 0.3 Intensity of R\u2088 branch line"},{"location":"cli_commands/#generate-spectrum-data","title":"Generate Spectrum Data","text":""},{"location":"cli_commands/#bh-spectra","title":"<code>bh-spectra</code>","text":"<p>Generates model spectrum and saves it as a compressed NumPy file (<code>.npz</code>).</p> <pre><code>bh-spectra --C 5.0 --T_rot 3500 --out spectrum.npz\n</code></pre> <p>Options:</p> <ul> <li><code>--out</code>: Output file name (default: <code>spectrum.npz</code>)</li> </ul> <p>Example:</p> <pre><code>bh-spectra --xmin 433.0 --xmax 434.0 --points 2000 --C 2.0 --T_rot 2500 --out my_spectrum.npz\n</code></pre>"},{"location":"cli_commands/#bh-spectra-csv","title":"<code>bh-spectra-csv</code>","text":"<p>Same as <code>bh-spectra</code> but outputs a CSV file instead of NumPy.</p> <pre><code>bh-spectra-csv --C 5.0 --T_rot 3500 --out spectrum.csv\n</code></pre> <p>Options:</p> <ul> <li><code>--out</code>: Output CSV filename (default: <code>spectrum.csv</code>)</li> </ul> <p>The resulting CSV will have columns:</p> <ul> <li><code>x</code> \u2014 Wavelength (nm)</li> <li><code>y</code> \u2014 Intensity (a.u.)</li> </ul>"},{"location":"cli_commands/#plot-spectrum","title":"Plot Spectrum","text":"<p>Generates and displays a spectrum plot using Matplotlib.</p> <pre><code>bh-spectra-plot --C 5.0 --T_rot 3500\n</code></pre> <p>Additional options:</p> <ul> <li><code>--save</code>: Save plot to file (e.g. <code>plot.png</code>)</li> <li><code>--dpi</code>: Resolution when saving (default: 100)</li> <li><code>--figsize</code>: Width and height in inches (default: <code>10 6</code>)</li> </ul>"},{"location":"cli_commands/#example-workflow","title":"Example Workflow","text":"<ol> <li> <p>Generate spectrum data <pre><code>bh-spectra --C 4.0 --T_rot 3200 --out data.npz\n</code></pre></p> </li> <li> <p>Export same parameters to CSV <pre><code>bh-spectra-csv --C 4.0 --T_rot 3200 --out data.csv\n</code></pre></p> </li> <li> <p>Visualize spectrum <pre><code>bh-spectra-plot --C 4.0 --T_rot 3200 --save plot.png --dpi 200\n</code></pre></p> </li> </ol>"},{"location":"cli_commands/#notes","title":"Notes","text":"<ul> <li>The BH-Spectra CLI tools are based on the BHModel class and use molecular constants loaded via <code>load_v00_wavelengths()</code>.</li> <li>Adjusting <code>C</code>, <code>T_rot</code>, and <code>w_inst</code> has the most visible effect on spectrum shape.</li> </ul>"},{"location":"dev-install-guide/","title":"Dev Environment &amp; MkDocs","text":"<p>This page is the single source of truth for setting up a local development environment for <code>bh-molecule</code> and running the docs site.</p>"},{"location":"dev-install-guide/#part-a-dev-environment","title":"Part A \u2014 Dev Environment","text":"<p>How to prepare your venv, install the package in editable mode, and set up Jupyter.</p>"},{"location":"dev-install-guide/#a1-prerequisites","title":"A1. Prerequisites","text":"<p>Python 3.10+, Git, and VS Code (recommended) or your preferred editor.  </p> <p>We isolate everything in <code>.venv/</code>.</p>"},{"location":"dev-install-guide/#a2-create-activate-venv","title":"A2. Create &amp; activate venv","text":"<p>Windows (PowerShell) <pre><code>python -m venv .venv\n.\\\\.venv\\\\Scripts\\\\Activate.ps1\npython -m pip install -U pip\n</code></pre></p> <p>macOS / Linux (bash)</p> <pre><code>python3 -m venv .venv\nsource .venv/bin/activate\npython -m pip install -U pip\n</code></pre> <p>If blocked on Windows: <code>Set-ExecutionPolicy -Scope CurrentUser RemoteSigned</code></p>"},{"location":"dev-install-guide/#a3-editable-install","title":"A3. Editable install","text":"<p>From repo root:</p> <pre><code>python -m pip install -e \".[dev]\"\n</code></pre> <p>Imports will work anywhere, and file edits are picked up automatically.</p>"},{"location":"dev-install-guide/#a4-jupyter-setup","title":"A4. Jupyter setup","text":"<p>Optional, for running notebooks in <code>examples/</code>:</p> <pre><code>python -m pip install ipykernel\npython -m ipykernel install --user --name=bh-molecule --display-name=\"bh-molecule (venv)\"\n</code></pre> <p>In VS Code, pick the bh-molecule (venv) kernel.</p>"},{"location":"dev-install-guide/#a5-git-ignore","title":"A5. Git ignore","text":"<p>Add to <code>.gitignore</code> if missing:</p> <pre><code>.venv/\nsite/\n.ipynb_checkpoints/\n</code></pre>"},{"location":"dev-install-guide/#part-b-mkdocs","title":"Part B \u2014 MkDocs","text":"<p>Steps to serve or build the docs site locally.</p>"},{"location":"dev-install-guide/#b1-install-mkdocs","title":"B1. Install MkDocs","text":"<p>If <code>.[dev]</code> already installed docs deps, skip this. Otherwise:</p> <pre><code>python -m pip install mkdocs mkdocs-material pymdown-extensions\n</code></pre>"},{"location":"dev-install-guide/#b2-local-preview","title":"B2. Local preview","text":"<pre><code>mkdocs serve\n# or preview on LAN:\nmkdocs serve -a 0.0.0.0:8000\n</code></pre>"},{"location":"dev-install-guide/#b3-build-site","title":"B3. Build site","text":"<pre><code>mkdocs build\n</code></pre> <p>Outputs to <code>./site/</code> \u2014 do not commit this.</p>"},{"location":"dev-install-guide/#b4-optional-pinned-versions","title":"B4. Optional pinned versions","text":"<pre><code>python -m pip install \\\n  mkdocs==1.6.1 mkdocs-material==9.6.16 pymdown-extensions==10.16.1\n</code></pre>"},{"location":"dev-install-guide/#troubleshooting","title":"Troubleshooting","text":"<ul> <li>MkDocs not found \u2192 Activate <code>venv</code>, or use <code>python -m mkdocs serve</code></li> <li>ImportError \u2192 Check <code>pip install -e .</code> was run in this <code>venv</code>, and correct kernel selected.</li> <li>Plugin missing \u2192 Install in <code>venv</code> and update <code>mkdocs.yml</code>.</li> <li>Port in use \u2192 Change port: <code>mkdocs serve -a 127.0.0.1:8001</code>.</li> </ul>"},{"location":"dev-install-guide/#venv-update","title":"<code>venv</code> update","text":"<p>If you need to recreate the venv and Windows/VS Code won\u2019t let you delete it: 1) Switch VS Code to a different interpreter (e.g., Conda base). 2) Reload or close VS Code. 3) Delete/recreate <code>.venv</code>. 4) Switch back to the project interpreter.</p> <p>Heads-up for synced folders (Dropbox/OneDrive/Drive): If your repo lives in a synced folder and you use multiple machines, avoid putting <code>.venv/</code> inside the repo. Keep the venv outside the synced tree and point Cursor/VS Code to it. See: Using a venv outside a synced folder</p> <p>(Add <code>.venv/</code> to <code>.gitignore</code> so a local in-repo venv won\u2019t be committed.)</p>"},{"location":"dev-install-guide/#quick-daily-commands","title":"Quick daily commands","text":"<p>Windows</p> <pre><code>.\\\\.venv\\\\Scripts\\\\Activate.ps1\nmkdocs serve\n</code></pre> <p>macOS / Linux</p> <pre><code>source .venv/bin/activate\nmkdocs serve\n</code></pre>"},{"location":"physics/","title":"Physics Module","text":"<p>Documentation extracted from docstrings in <code>bh_molecule.physics</code>.</p> <p>(Auto-generated by <code>docs/generate_physics_docs.py</code>.)</p>"},{"location":"physics/#bhmodel","title":"BHModel","text":"<p>Core BH spectrum model; file I/O is done elsewhere (dataio).</p>"},{"location":"physics/#energy","title":"<code>energy</code>","text":"<p>Rovibronic term value \\(E(v,N)\\) (in cm\u207b\u00b9) for a given electronic state.</p> <p>The model uses a Dunham-like expansion truncated to cubic vibrational terms and quartic (centrifugal distortion) in rotation:</p> \\[ E(v,N) \\;=\\; T_e \\;+\\; G(v) \\;+\\; F_v(N), \\] <p>with</p> \\[ \\begin{aligned} G(v) &amp;= \\omega_e\\,(v+\\tfrac12) - \\omega_e x_e\\,(v+\\tfrac12)^2 + \\omega_e y_e\\,(v+\\tfrac12)^3, \\\\ B_v  &amp;= B_e - \\alpha_e\\,(v+\\tfrac12), \\\\ D_v  &amp;= D_e - \\beta_e\\,(v+\\tfrac12), \\\\ F_v(N) &amp;= B_v\\,N(N+1) - D_v\\,\\big[N(N+1)\\big]^2 . \\end{aligned} \\]"},{"location":"physics/#parameters","title":"Parameters","text":"<p><code>v</code> : int     Vibrational quantum number \\(v \\ge 0\\).</p> <p><code>N</code> : int     Rotational quantum number (spinless). For singlet states,     \\(J \\approx N\\); fine/\u039b-doubling and spin-rotation are neglected here.</p> <p><code>c</code> : MolecularConstants     Parameter set for the electronic state (fields in cm\u207b\u00b9):     <code>T_e, omega_e, omega_e_x_e, omega_e_y_e, B_e, alpha_e, D_e, beta_e</code>.</p>"},{"location":"physics/#returns","title":"Returns","text":"<p>float     Rovibronic term value \\(E(v,N)\\) in cm\u207b\u00b9.</p>"},{"location":"physics/#notes","title":"Notes","text":"<ul> <li>Truncation: includes up to \\((v+\\tfrac12)^3\\) in \\(G(v)\\) and   \\([N(N+1)]^2\\) in \\(F_v(N)\\). Higher-order terms (e.g. \\(H_v\\)   or additional Dunham coefficients) are omitted.</li> <li>Parity/\u039b-doubling, spin-rotation, hyperfine, and electronic spin are   ignored (appropriate for a simplified ^1\u03a0\u2194^1\u03a3^+ treatment in this codebase).</li> </ul>"},{"location":"physics/#examples","title":"Examples","text":"<pre><code>from bh_molecule.constants import BH_A\nE01 = BHModel.energy(v=0, N=1, c=BH_A)\nE11 = BHModel.energy(v=1, N=1, c=BH_A)\nassert E11 &gt; E01\n</code></pre>"},{"location":"physics/#line_profile","title":"<code>line_profile</code>","text":"<p>Gaussian line profile with Doppler + instrumental broadening (FWHMs added in quadrature).</p>"},{"location":"physics/#parameters_1","title":"Parameters","text":"<p><code>x</code> : array_like     Wavelength axis in nm.</p> <p><code>wl</code> : float     Line center wavelength in nm.</p> <p><code>w_inst</code> : float     Instrumental full width at half maximum (FWHM) in nm, assumed Gaussian.</p> <p><code>T</code> : float     Translational/kinetic temperature in K for Doppler broadening.</p>"},{"location":"physics/#returns_1","title":"Returns","text":"<p>numpy.ndarray     Normalized Gaussian profile sampled on <code>x</code> (units \u2248 nm\u207b\u00b9; area \u2248 1 when integrated over <code>x</code>).</p>"},{"location":"physics/#notes_1","title":"Notes","text":"<p>The Doppler FWHM (in nm) is computed from a compact numerical form tailored to this model:</p> \\[ \\Delta\\lambda_D \\approx 7.72 \\times 10^{-5}\\; \\lambda\\, \\sqrt{\\frac{T\\,K_{2\\mathrm{eV}}}{M_{\\mathrm{BH}}}} \\] <p>where \\(\\lambda\\) is in nm, \\(K_{2\\mathrm{eV}} = 8.617\\times10^{-5}\\,\\mathrm{eV\\,K^{-1}}\\), and \\(M_{\\mathrm{BH}}\\) is the BH molecular mass in amu. This is equivalent to the standard expression</p> \\[ \\Delta\\lambda_D = \\lambda \\sqrt{\\frac{8\\ln 2\\,k_B T}{m c^2}} \\] <p>after unit conversions (nm, eV, amu). The total Gaussian FWHM is</p> \\[ \\Delta\\lambda = \\sqrt{\\Delta\\lambda_D^2 + \\Delta\\lambda_{\\mathrm{inst}}^2}, \\] <p>and the standard deviation is \\(\\sigma = \\Delta\\lambda / (2\\sqrt{2\\ln 2})\\). The returned profile is</p> \\[ g(x) = \\frac{1}{\\sqrt{2\\pi}\\,\\sigma}\\;\\exp\\!\\left[-\\frac{(x-\\lambda)^2}{2\\sigma^2}\\right]. \\] <p>Broadcasting: <code>wl</code>, <code>w_inst</code>, and <code>T</code> may be scalars or arrays broadcastable to the shape of <code>x</code>.</p>"},{"location":"physics/#examples_1","title":"Examples","text":"<pre><code>x = np.linspace(433.0, 434.0, 2001)\ng = model.line_profile(x, wl=433.5, w_inst=0.02, T=0.0)  # instrument-limited\nassert np.isfinite(g).all()\n</code></pre>"},{"location":"physics/#a_coeff","title":"<code>A_coeff</code>","text":"<p>Einstein \\(A_{ul}\\) for a single rovibronic line of the BH \\(A\\,^1\\Pi \\rightarrow X\\,^1\\Sigma^+\\) system.</p> <p>This uses band Einstein coefficients (per upper vibrational level) and H\u00f6nl\u2013London factors to apportion intensity among P/Q/R rotational branches:</p> \\[ A_{ul}(v', N_2 \\to N_1) = \\frac{A_{\\mathrm{vib}}(v') \\, H_{\\mathrm{HL}}(N_2, \\Delta N)}{2N_2 + 1}, \\] <p>with</p> \\[ \\Delta N = N_2 - N_1 \\in \\{-1,0,+1\\}, \\quad H_{\\mathrm{HL}} = \\begin{cases}     N_2/2, &amp; \\Delta N = -1 \\quad (\\text{P}) \\\\     (2N_2+1)/2, &amp; \\Delta N = 0 \\quad (\\text{Q}) \\\\     (N_2+1)/2, &amp; \\Delta N = +1 \\quad (\\text{R}) \\end{cases} \\]"},{"location":"physics/#parameters_2","title":"Parameters","text":"<p><code>v</code> : int     Upper-state vibrational quantum number \\(v'\\). Supported here: 0, 1, 2.</p> <p><code>N2</code> : int     Upper-state rotational quantum number (A-state). For singlets, \\(J = N\\).</p> <p><code>N1</code> : int     Lower-state rotational quantum number (X-state).</p>"},{"location":"physics/#returns_2","title":"Returns","text":"<p>float     Line Einstein \\(A_{ul}\\) in s\u207b\u00b9.</p>"},{"location":"physics/#notes_2","title":"Notes","text":"<ul> <li><code>A_vib[v]</code> are pre-tabulated band Einstein coefficients for   \\(A(v') \\rightarrow X\\) (units s\u207b\u00b9), and the H\u00f6nl\u2013London factors   correspond to a \\(^1\\Pi \\rightarrow {}^1\\Sigma^+\\) transition in the   Hund's case (a) limit.</li> <li>This simplified partition neglects \u039b-doubling, parity, and nuclear-spin   substructure; any additional statistical weights should be applied   elsewhere (e.g. electronic degeneracy).</li> </ul>"},{"location":"physics/#raises","title":"Raises","text":"<p>ValueError     If \\(\\Delta N \\notin \\{-1,0,+1\\}\\) or <code>v</code> is out of the supported range.</p>"},{"location":"physics/#examples_2","title":"Examples","text":"<pre><code>A = BHModel.A_coeff(v=0, N2=8, N1=7)  # R branch (\u0394N=+1)\n</code></pre>"},{"location":"physics/#spectrum","title":"<code>spectrum</code>","text":"<p>Compute the BH band spectrum on wavelength grid <code>x</code> for a single branch.</p> <p>This model uses: - Upper (emitting) A-state rovibrational energies from the parametric constants (<code>BH_A</code>); - Lower X-state only for line positions, read from the tabulated wavelengths.</p>"},{"location":"physics/#parameters_3","title":"Parameters","text":"<p><code>x</code> : ndarray     Wavelength grid in nm.</p> <p><code>C</code> : float     Population scale (absorbing other constants, path length, etc.).</p> <p><code>T_rot</code> : float     Rotational temperature (K) used in Boltzmann factor for A-state populations.</p> <p><code>w_inst</code> : float     Instrumental Gaussian FWHM (nm).</p> <p><code>T_tra</code> : float     Translational temperature (K) for Doppler broadening in <code>line_profile</code>.</p> <p><code>branch</code> : Branch     Which rotational branch to synthesize: <code>Branch.P</code>, <code>Branch.Q</code>, or <code>Branch.R</code>.</p> <p><code>v_max</code> : int, default 2     Highest upper-state vibrational level \\(v'\\) to include (inclusive).</p> <p><code>N2_max</code> : int, default 22     Highest upper-state rotational quantum number \\(N_2\\) to include (inclusive).</p>"},{"location":"physics/#returns_3","title":"Returns","text":"<p>ndarray     Spectrum on <code>x</code> (same shape), in arbitrary units.</p>"},{"location":"physics/#notes_3","title":"Notes","text":"<ul> <li>A-state physics (energies, populations) is evaluated from <code>BH_A</code> via <code>energy(...)</code>.</li> <li>X-state enters only through the tabulated line centers for the chosen <code>branch</code>.</li> <li>Per-line intensity is:   \\((h\\nu)/(4\\pi)\\,n'(v',N_2)\\,A(v',N_2\\!\\to\\!N_1)\\,g_\\lambda(x)\\),   where <code>g_\\lambda</code> is a Gaussian with Doppler+instrumental width.</li> </ul>"},{"location":"physics/#full_fit_model","title":"<code>full_fit_model</code>","text":"<p>Composite forward model for the 433 nm window: BH Q-branch (A\u2192X) + two fixed auxiliary lines + constant baseline.</p> <p>The BH A-state populations/energies are computed from parametric constants via :meth:<code>spectrum</code> (branch fixed to Q), while X-state enters only through the tabulated line centers used inside :meth:<code>spectrum</code>. Two nearby isolated features at fixed wavelengths (<code>R7</code>, <code>R8</code>) are modeled as Gaussians and added on top, plus a constant baseline.</p>"},{"location":"physics/#parameters_4","title":"Parameters","text":"<p><code>x</code> : ndarray     Wavelength grid in nm.</p> <p><code>C</code> : float     Overall population/intensity scale for the BH Q-branch.</p> <p><code>T_rot</code> : float     Rotational temperature (K) for the A-state Boltzmann factor.</p> <p><code>dx</code> : float     Rigid wavelength shift in nm applied to <code>x</code> (accounts for calibration/tilt).</p> <p><code>w_inst</code> : float     Instrumental Gaussian FWHM in nm used for line broadening.</p> <p><code>base</code> : float     Constant background offset (a.u.).</p> <p><code>I_R7</code> : float     Amplitude for the auxiliary Gaussian at \\(\\lambda_{R7}=433.64776244\\,\\mathrm{nm}\\).</p> <p><code>I_R8</code> : float     Amplitude for the auxiliary Gaussian at \\(\\lambda_{R8}=433.33500584\\,\\mathrm{nm}\\).</p>"},{"location":"physics/#returns_4","title":"Returns","text":"<p>ndarray     Modeled spectrum sampled on <code>x</code> (same shape), in arbitrary units.</p>"},{"location":"physics/#notes_4","title":"Notes","text":"<ul> <li>The BH Q-branch contribution is scaled by <code>1e8</code> internally to bring values   to a convenient numeric range for fitting; this does not change relative shapes.</li> <li>The auxiliary lines use :meth:<code>line_profile</code> with the same <code>w_inst</code> and   a translational temperature fixed to <code>0.0</code> (instrument-limited broadening).   If Doppler broadening is needed, promote <code>T_tra</code> to a parameter.</li> <li>Set <code>I_R7=I_R8=0</code> to exclude the auxiliary features.</li> </ul>"},{"location":"physics/#examples_3","title":"Examples","text":"<pre><code>y = model.full_fit_model(\n    x, C=1.2, T_rot=2100.0, dx=0.005,\n    w_inst=0.02, base=0.01, I_R7=0.3, I_R8=0.2,\n)\n</code></pre>"},{"location":"venv-outside-synced-folders/","title":"Using a venv outside a synced folder (Dropbox/OneDrive/Google Drive)","text":"<p>If you keep your repo inside a synced folder, excluding <code>.venv/</code> can be unreliable or annoying. Easiest fix: create the virtual environment outside the synced tree and point your tools to it.</p> <p>This page shows how.</p>"},{"location":"venv-outside-synced-folders/#tldr","title":"TL;DR","text":"<ul> <li>Put venvs in a local directory (e.g. <code>~/.venvs</code> or <code>C:\\Users\\&lt;you&gt;\\.venvs</code>).</li> <li>Create/activate the venv there.</li> <li>Tell Cursor/VS Code to use that interpreter.</li> <li>Keep <code>.venv/</code> in <code>.gitignore</code> in case someone creates one inside the repo.</li> </ul>"},{"location":"venv-outside-synced-folders/#create-activate-the-venv","title":"Create &amp; activate the venv","text":""},{"location":"venv-outside-synced-folders/#windows-powershell","title":"Windows (PowerShell)","text":"<p>1) Pick a home for all your venvs</p> <pre><code>$ENV_DIR = \"$env:USERPROFILE\\.venvs\"\nNew-Item -ItemType Directory -Force $ENV_DIR | Out-Null\n</code></pre> <p>2) Create the venv (choose ONE of these)</p> <p>Option A \u2014 with the Python launcher:</p> <pre><code>py -3.12 -m venv \"$ENV_DIR\\bh-molecule\"\n</code></pre> <p>Option B \u2014 with <code>python</code>:</p> <pre><code>python -m venv \"$ENV_DIR\\bh-molecule\"\n</code></pre> <p>3) Activate</p> <pre><code>&amp; \"$ENV_DIR\\bh-molecule\\Scripts\\Activate.ps1\"\n</code></pre> <p>4) Upgrade pip</p> <pre><code>python -m pip install -U pip\n</code></pre> <p>5) Install this project (dev extras)</p> <pre><code>python -m pip install -e \".[dev]\"\n</code></pre> <p>If activation is blocked on Windows, run once:</p> <pre><code>Set-ExecutionPolicy -Scope CurrentUser RemoteSigned\n</code></pre>"},{"location":"venv-outside-synced-folders/#macos-linux","title":"macOS / Linux","text":"<pre><code>ENV_DIR=\"$HOME/.venvs\"\nmkdir -p \"$ENV_DIR\"\n\npython3 -m venv \"$ENV_DIR/bh-molecule\"\nsource \"$ENV_DIR/bh-molecule/bin/activate\"\n\npython -m pip install -U pip\npython -m pip install -e \".[dev]\"\n</code></pre> <p>Deactivate any time:</p> <pre><code>deactivate\n</code></pre>"},{"location":"venv-outside-synced-folders/#point-ide-to-the-external-venv","title":"Point IDE to the external venv","text":"<ol> <li>Ctrl+Shift+P \u2192 \u201cPython: Select Interpreter\u201d \u2192 \u201cEnter interpreter path\u201d</li> </ol> <ul> <li>Windows:      <code>C:\\Users\\&lt;you&gt;\\.venvs\\bh-molecule\\Scripts\\python.exe</code></li> <li>macOS/Linux:      <code>/Users/&lt;you&gt;/.venvs/bh-molecule/bin/python</code></li> </ul> <ol> <li>Persist for this workspace (recommended):</li> </ol> <p>Create <code>.vscode/settings.json</code>:</p> <p>Windows</p> <pre><code>{\n  \"python.defaultInterpreterPath\": \"${env:USERPROFILE}\\\\.venvs\\\\bh-molecule\\\\Scripts\\\\python.exe\",\n  \"python.terminal.activateEnvironment\": true\n}\n</code></pre> <p>macOS/Linux</p> <pre><code>{\n  \"python.defaultInterpreterPath\": \"${env:HOME}/.venvs/bh-molecule/bin/python\",\n  \"python.terminal.activateEnvironment\": true\n}\n</code></pre> <p>(Optional) Make external venvs auto-discoverable in the picker:</p> <ul> <li>Windows (User Settings): <code>\"python.venvPath\": \"C:\\\\Users\\\\&lt;you&gt;\\\\.venvs\"</code></li> <li>macOS/Linux (User Settings): <code>\"python.venvPath\": \"~/.venvs\"</code></li> </ul>"},{"location":"venv-outside-synced-folders/#jupyter-notebooks-in-cursor","title":"Jupyter notebooks in Cursor","text":"<ul> <li>Kernel picker \u2192 Select Another Kernel \u2192 Python Environments \u2192 choose the same venv,   or run \u201cPython: Select Interpreter to start Jupyter server\u201d and pick it.</li> </ul>"},{"location":"venv-outside-synced-folders/#common-tasks","title":"Common tasks","text":"<p>Install/upgrade project deps:</p> <pre><code>python -m pip install -U pip\npython -m pip install -e \".[dev]\"\n</code></pre> <p>Add a package:</p> <pre><code>python -m pip install &lt;package&gt;\n# Then record it in pyproject (e.g., optional-dependencies.dev) if needed.\n</code></pre> <p>Freeze (for debugging):</p> <pre><code>python -m pip freeze &gt; freeze.txt\n</code></pre>"},{"location":"venv-outside-synced-folders/#recreate-the-environment","title":"Recreate the environment","text":"<p>If things drift, rebuild quickly:</p> <p>Windows</p> <pre><code>Remove-Item -Recurse -Force \"$env:USERPROFILE\\.venvs\\bh-molecule\"\npython -m venv \"$env:USERPROFILE\\.venvs\\bh-molecule\"\n&amp; \"$env:USERPROFILE\\.venvs\\bh-molecule\\Scripts\\Activate.ps1\"\npython -m pip install -U pip\npython -m pip install -e \".[dev]\"\n</code></pre> <p>macOS / Linux</p> <pre><code>rm -rf \"$HOME/.venvs/bh-molecule\"\npython3 -m venv \"$HOME/.venvs/bh-molecule\"\nsource \"$HOME/.venvs/bh-molecule/bin/activate\"\npython -m pip install -U pip\npython -m pip install -e \".[dev]\"\n</code></pre>"},{"location":"venv-outside-synced-folders/#notes-gotchas","title":"Notes &amp; gotchas","text":"<ul> <li>Synced folders: keeping venvs outside avoids sync noise and conflicts (Dropbox/OneDrive/Drive).</li> <li>.gitignore: add <code>.venv/</code> so a local in-repo venv never gets committed:</li> </ul> <p><pre><code>.venv/\n</code></pre> * Windows execution policy: if activation is blocked, run once:</p> <p><pre><code>Set-ExecutionPolicy -Scope CurrentUser RemoteSigned\n</code></pre> * Multiple machines: each machine should have its own venv; reinstall with <code>-e \".[dev]\"</code>.</p>"}]}